{% load static %}

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>챌린지 생성(점주)</title>
</head>
<body>
    <h2>( {{ store.name }} ) 챌린지 생성</h2>

    <form method="post">
        {% csrf_token %}

        <div>
            <label>챌린지 제목:</label><br/>
            {{ form.title }}
            {% if form.title.errors %}
                <p style="color:red">{{ form.title.errors }}</p>
            {% endif %}
        </div>

        <div>
            <label>챌린지 설명:</label><br/>
            {{ form.description }}
            {% if form.description.errors %}
                <p style="color:red">{{ form.description.errors }}</p>
            {% endif %}
        </div>

        <!--################보상################-->
        <div>
            <label>보상 종류:</label>
            {{ form.reward_type }}
        </div>

        <div id="reward-points-field">
            <label>포인트:</label>
            {{ form.reward_points }}
        </div>

        <div id="reward-custom-field">
            <label>직접 입력 보상:</label>
            {{ form.reward_description }}
        </div>
        <!---####################################-->
        
        <div>
            <label>챌린지 종류:</label><br/>
            {{ form.mission_type }}
            {% if form.mission_type.errors %}
                <p style="color:red">{{ form.mission_type.errors }}</p>
            {% endif %}
        </div>

        <div>
            <label>목표치:</label><br/>
            {{ form.target_value }}
            {% if form.target_value.errors %}
                <p style="color:red">{{ form.target_value.errors }}</p>
            {% endif %}
        </div>

        <div>
            <label>시작일:</label><br/>
            {{ form.start_date }}
            {% if form.start_date.errors %}
                <p style="color:red">{{ form.start_date.errors }}</p>
            {% endif %}
        </div>

        <div>
            <label>종료일:</label><br/>
            {{ form.end_date }}
            {% if form.end_date.errors %}
                <p style="color:red">{{ form.end_date.errors }}</p>
            {% endif %}
        </div>

        <br/>
        <button type="submit">완료</button>
        <a href="{% url 'stores:owner-store-list' %}">취소</a>
    </form>

    <!--################ JS(보상 관련) ################-->
    <script>
const rewardSelect = document.getElementById("id_reward_type");
const pointsField = document.getElementById("reward-points-field");
const customField = document.getElementById("reward-custom-field");

function toggleRewardFields() {
    if (rewardSelect.value === "POINT") {
        pointsField.style.display = "block";
        customField.style.display = "none";
    } else {
        pointsField.style.display = "none";
        customField.style.display = "block";
    }
}

rewardSelect.addEventListener("change", toggleRewardFields);
toggleRewardFields();
</script>

</body>
</html>
