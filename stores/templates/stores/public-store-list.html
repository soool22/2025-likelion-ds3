{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DDAL-LANG</title>
    <link rel="stylesheet" href="{% static 'css/Top100&ReviewBest.css'%}" />    
</head>
<body>
    <main>
        <header>
            <a href="{% url 'home:main' %}" style="text-decoration: none;">
                <img src="{% static 'IMG/edit-back.png'%}" class="back-img"></img>
            </a>
            <div class="tittle-box">
                <img src="{% static 'IMG/recommendstorepicked.svg'%}">
                <div class="tittle text">ëª¨ë“  ê°€ê²Œ</div>
            </div>
        </header>
        <form method="get">
        <div class="filterBox">
            <select name="category" onchange="this.form.submit()" class="boxStyle">
                <option value="">-- ì„ íƒí•˜ì„¸ìš” --</option>
                {% for category in categories %}
                    <option value="{{ category.slug }}" {% if category.slug == selected_category %}selected{% endif %}>
                        {{ category.name }}
                    </option>
                {% endfor %}
            </select>
        </div>
        <!-- ê°€ê²Œ ë¦¬ìŠ¤íŠ¸ -->
        <div class="store-info-box">
            {% for store in stores %}
                <a href="{% url 'stores:store-detail' store.id %}" class="box"  style="text-decoration: none;">
                    <div class="left-box">
                        <div class="first-line text">
                            {{ store.address }} 
                            {% for category in store.category.all %}
                                {{ category.name }}{% if not forloop.last %}, {% endif %}
                            {% endfor %}
                        </div>
                        <div class="second-line">
                            <div class="num text">{{ forloop.counter }}</div>
                            <div class="store-name text">{{ store.name }}</div>
                        </div>
                        <div class="third-line">
                            <div class="position text">ğŸ“{{ store.distance|default_if_none:"-" }}</div>
                            <div class="operation">
                            <img src="{% static 'IMG/blue-time.svg' %}" style="color:#0094D6">
                            {% if store.is_open %}                                
                                <div class="time text" style="color:#0094D6">ì˜ì—…ì¤‘</div>
                            {% else %}
                                <div class="time text" style="color:#0094D6">ì˜ì—… ì¢…ë£Œ</div>
                            {% endif %}
                        </div>
                        </div>
                    </div>
                    {% if store.image %}
                        <img src="{{ store.image.url }}" alt="{{ store.name }} ì´ë¯¸ì§€" class="store-img">
                    {% else %}
                        <img src="{% static 'img/default_store.png' %}" alt="Default ì´ë¯¸ì§€" class="store-img">
                    {% endif %}
                </a>
            {% empty %}
                <p>í•´ë‹¹ ì§€ì—­êµ¬ì— ë“±ë¡ëœ ê°€ê²Œê°€ ì—†ìŠµë‹ˆë‹¤.</p>
            {% endfor %}
        </div>
    </main>
</body>
</html>
