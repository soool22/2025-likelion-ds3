{% load static %}

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>메인 페이지</title>
    <style>
    body {
        font-family: Arial, sans-serif;
        margin: 16px;
        background: #f9f9f9;
    }
    h2 {
        margin-top: 32px;
        margin-bottom: 8px;
    }
    .store-section {
        margin-bottom: 32px;
    }
    .store-cards {
        display: flex;
        gap: 16px;
        overflow-x: auto;
        padding-bottom: 8px;
    }
    .store-card {
        flex: 0 0 180px;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 10px;
        box-shadow: 1px 1px 4px rgba(0,0,0,0.1);
        text-align: center;
        background: #fff;
    }
    .store-card h3 {
        font-size: 1em;
        margin: 8px 0;
    }
    .store-cards::-webkit-scrollbar {
        height: 6px;
    }
    .store-cards::-webkit-scrollbar-thumb {
        background: #ccc;
        border-radius: 3px;
    }
    a {
        text-decoration: none;
        color: #007BFF;
    }
    a:hover {
        text-decoration: underline;
    }
    </style>
</head>
<body>

    <h2>메인 페이지</h2>
    <hr>

    {% if request.user.is_authenticated %}
        {{ request.user.nickname }}({{ request.user.username }})님 환영합니다.  
        <a href="{% url 'accounts:logout' %}">로그아웃</a><br><br>
        <a href="{% url 'accounts:mypage' %}">마이페이지</a><br><br>
    {% else %}
        <a href="{% url 'accounts:login' %}">로그인</a>
        <a href="{% url 'accounts:signup' %}">회원가입</a>
    {% endif %}

    <hr>

    <!-- 방문자 랭킹 -->
    <div class="store-section">
        <h2>방문자 랭킹</h2>
        <div class="store-cards">
            {% for store in top_visits %}
                <div class="store-card">
                    <h3><a href="{% url 'stores:store-detail' store.id %}">{{ store.name }}</a></h3>
                </div>
            {% endfor %}
        </div>
        <a href="{% url 'stores:popular-store-list' %}">더보기</a>
    </div>

    <!-- 리뷰 베스트 -->
    <div class="store-section">
        <h2>리뷰 베스트</h2>
        <div class="store-cards">
            {% for store in review_best %}
                <div class="store-card">
                    <h3><a href="{% url 'stores:store-detail' store.id %}">{{ store.name }}</a></h3>
                </div>
            {% endfor %}
        </div>
        <a href="{% url 'stores:review-best-list' %}">더보기</a>
    </div>

    <!-- AI 추천 가게 -->
    <div class="store-section">
        <h2>AI 추천 가게</h2>
        <div class="store-cards">
            {% if recommended_stores %}
                {% for store in recommended_stores %}
                    <div class="store-card">
                        <h3><a href="{% url 'stores:store-detail' store.id %}">{{ store.name }}</a></h3>
                    </div>
                {% endfor %}
            {% else %}
                <p>추천 가게를 불러오는 중입니다...</p>
            {% endif %}
        </div>
        <a href="{% url 'stores:public-store-list' %}">더보기</a>
    </div>

</body>
</html>
